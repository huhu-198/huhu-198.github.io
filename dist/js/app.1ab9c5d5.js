(function(){"use strict";var e={5269:function(e,t,i){var r=i(9242),a=i(3396);function o(e,t,i,r,o,s){const n=(0,a.up)("GameOne"),l=(0,a.up)("HelloWorld");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n),(0,a.Wm)(l,{msg:"Welcome to Your Vue.js App"})],64)}var s=i(7139);const n={class:"hello"},l=(0,a.uE)('<p data-v-3d63399a> For a guide and recipes on how to configure / customize this project,<br data-v-3d63399a> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-3d63399a>vue-cli documentation</a>. </p><h3 data-v-3d63399a>Installed CLI Plugins</h3><ul data-v-3d63399a><li data-v-3d63399a><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-3d63399a>babel</a></li><li data-v-3d63399a><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint" target="_blank" rel="noopener" data-v-3d63399a>eslint</a></li></ul><h3 data-v-3d63399a>Essential Links</h3><ul data-v-3d63399a><li data-v-3d63399a><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-3d63399a>Core Docs</a></li><li data-v-3d63399a><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-3d63399a>Forum</a></li><li data-v-3d63399a><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-3d63399a>Community Chat</a></li><li data-v-3d63399a><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-3d63399a>Twitter</a></li><li data-v-3d63399a><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-3d63399a>News</a></li></ul><h3 data-v-3d63399a>Ecosystem</h3><ul data-v-3d63399a><li data-v-3d63399a><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-3d63399a>vue-router</a></li><li data-v-3d63399a><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-3d63399a>vuex</a></li><li data-v-3d63399a><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-3d63399a>vue-devtools</a></li><li data-v-3d63399a><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-3d63399a>vue-loader</a></li><li data-v-3d63399a><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-3d63399a>awesome-vue</a></li></ul>',7);function c(e,t,i,r,o,c){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("h1",null,(0,s.zw)(i.msg),1),l])}var u={name:"HelloWorld",props:{msg:String}},d=i(89);const h=(0,d.Z)(u,[["render",c],["__scopeId","data-v-3d63399a"]]);var v=h;const p={class:"container"},g=(0,a.uE)('<div class="heading"><h1 class="title">2048</h1><div class="scores-container"><div class="score-container">0</div><div class="best-container">0</div></div></div><div class="above-game"><p class="game-intro"> 使用方向键移动方块 <strong>用vue框架跑的2048</strong></p><a class="restart-button">New Game</a></div><div class="game-container"><div class="game-message"><p></p><div class="lower"><a class="keep-playing-button">Keep going</a><a class="retry-button">Try again</a></div></div><div class="grid-container"><div class="grid-row"><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div></div><div class="grid-row"><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div></div><div class="grid-row"><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div></div><div class="grid-row"><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div><div class="grid-cell"></div></div></div><div class="tile-container"></div></div>',3),f=[g];function y(e,t,i,r,o,s){return(0,a.wg)(),(0,a.iD)("div",p,f)}i(7658);function m(){this.events={},this.listen()}function b(){this.tileContainer=document.querySelector(".tile-container"),this.scoreContainer=document.querySelector(".score-container"),this.bestContainer=document.querySelector(".best-container"),this.messageContainer=document.querySelector(".game-message"),this.score=0}function w(){this.bestScoreKey="bestScore",this.gameStateKey="gameState",this.storage=window.localStorage}function x(e,t){this.x=e.x,this.y=e.y,this.value=t||2,this.previousPosition=null,this.mergedFrom=null}function C(e,t){this.size=e,this.cells=t?this.fromState(t):this.empty()}function k(e,t,i,r){this.size=e,this.inputManager=new t,this.storageManager=new r,this.actuator=new i,this.startTiles=2,this.inputManager.on("move",this.move.bind(this)),this.inputManager.on("restart",this.restart.bind(this)),this.inputManager.on("keepPlaying",this.keepPlaying.bind(this)),this.setup()}m.prototype.on=function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},m.prototype.emit=function(e,t){var i=this.events[e];i&&i.forEach((function(e){e(t)}))},m.prototype.listen=function(){var e=this,t={w:0,d:1,s:2,a:3,W:0,D:1,S:2,A:3,ArrowUp:0,ArrowRight:1,ArrowDown:2,ArrowLeft:3};document.addEventListener("keydown",(function(i){var r=t[i.key];void 0!==r&&(i.preventDefault(),e.emit("move",r)),"r"!==i.key&&"R"!==i.key||e.restart.call(e,i)})),this.bindButtonPress(".retry-button",this.restart),this.bindButtonPress(".restart-button",this.restart),this.bindButtonPress(".keep-playing-button",this.keepPlaying)},m.prototype.restart=function(e){e.preventDefault(),this.emit("restart")},m.prototype.keepPlaying=function(e){e.preventDefault(),this.emit("keepPlaying")},m.prototype.bindButtonPress=function(e,t){var i=document.querySelector(e);i.addEventListener("click",t.bind(this))},b.prototype.actuate=function(e,t){var i=this;window.requestAnimationFrame((function(){i.clearContainer(i.tileContainer),e.cells.forEach((function(e){e.forEach((function(e){e&&i.addTile(e)}))})),i.updateScore(t.score),i.updateBestScore(t.bestScore),t.terminated&&(t.over?i.message(!1):t.won&&i.message(!0))}))},b.prototype.continueGame=function(){this.clearMessage()},b.prototype.clearContainer=function(e){while(e.firstChild)e.removeChild(e.firstChild)},b.prototype.addTile=function(e){var t=this,i=document.createElement("div"),r=document.createElement("div"),a=e.previousPosition||{x:e.x,y:e.y},o=this.positionClass(a),s=["tile","tile-"+e.value,o];e.value>2048&&s.push("tile-super"),this.applyClasses(i,s),r.classList.add("tile-inner"),r.textContent=e.value,e.previousPosition?window.requestAnimationFrame((function(){s[2]=t.positionClass({x:e.x,y:e.y}),t.applyClasses(i,s)})):e.mergedFrom?(s.push("tile-merged"),this.applyClasses(i,s),e.mergedFrom.forEach((function(e){t.addTile(e)}))):(s.push("tile-new"),this.applyClasses(i,s)),i.appendChild(r),this.tileContainer.appendChild(i)},b.prototype.applyClasses=function(e,t){e.setAttribute("class",t.join(" "))},b.prototype.normalizePosition=function(e){return{x:e.x+1,y:e.y+1}},b.prototype.positionClass=function(e){return e=this.normalizePosition(e),"tile-position-"+e.x+"-"+e.y},b.prototype.updateScore=function(e){this.clearContainer(this.scoreContainer);var t=e-this.score;if(this.score=e,this.scoreContainer.textContent=this.score,t>0){var i=document.createElement("div");i.classList.add("score-addition"),i.textContent="+"+t,this.scoreContainer.appendChild(i)}},b.prototype.updateBestScore=function(e){this.bestContainer.textContent=e},b.prototype.message=function(e){var t=e?"game-won":"game-over",i=e?"You win!":"Game over!";this.messageContainer.classList.add(t),this.messageContainer.getElementsByTagName("p")[0].textContent=i},b.prototype.clearMessage=function(){this.messageContainer.classList.remove("game-won"),this.messageContainer.classList.remove("game-over")},w.prototype.getBestScore=function(){return this.storage.getItem(this.bestScoreKey)||0},w.prototype.setBestScore=function(e){this.storage.setItem(this.bestScoreKey,e)},w.prototype.getGameState=function(){var e=this.storage.getItem(this.gameStateKey);return e?JSON.parse(e):null},w.prototype.setGameState=function(e){this.storage.setItem(this.gameStateKey,JSON.stringify(e))},w.prototype.clearGameState=function(){this.storage.removeItem(this.gameStateKey)},x.prototype.savePosition=function(){this.previousPosition={x:this.x,y:this.y}},x.prototype.updatePosition=function(e){this.x=e.x,this.y=e.y},x.prototype.serialize=function(){return{position:{x:this.x,y:this.y},value:this.value}},C.prototype.empty=function(){for(var e=[],t=0;t<this.size;t++)for(var i=e[t]=[],r=0;r<this.size;r++)i.push(null);return e},C.prototype.fromState=function(e){for(var t=[],i=0;i<this.size;i++)for(var r=t[i]=[],a=0;a<this.size;a++){var o=e[i][a];r.push(o?new x(o.position,o.value):null)}return t},C.prototype.randomAvailableCell=function(){var e=this.availableCells();if(e.length)return e[Math.floor(Math.random()*e.length)]},C.prototype.availableCells=function(){var e=[];return this.eachCell((function(t,i,r){r||e.push({x:t,y:i})})),e},C.prototype.eachCell=function(e){for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)e(t,i,this.cells[t][i])},C.prototype.cellsAvailable=function(){return!!this.availableCells().length},C.prototype.cellAvailable=function(e){return!this.cellOccupied(e)},C.prototype.cellOccupied=function(e){return!!this.cellContent(e)},C.prototype.cellContent=function(e){return this.withinBounds(e)?this.cells[e.x][e.y]:null},C.prototype.insertTile=function(e){this.cells[e.x][e.y]=e},C.prototype.removeTile=function(e){this.cells[e.x][e.y]=null},C.prototype.withinBounds=function(e){return e.x>=0&&e.x<this.size&&e.y>=0&&e.y<this.size},C.prototype.serialize=function(){for(var e=[],t=0;t<this.size;t++)for(var i=e[t]=[],r=0;r<this.size;r++)i.push(this.cells[t][r]?this.cells[t][r].serialize():null);return{size:this.size,cells:e}},k.prototype.restart=function(){this.storageManager.clearGameState(),this.actuator.continueGame(),this.setup()},k.prototype.keepPlaying=function(){this.keepPlaying=!0,this.actuator.continueGame()},k.prototype.isGameTerminated=function(){return this.over||this.won&&!this.keepPlaying},k.prototype.setup=function(){var e=this.storageManager.getGameState();e?(this.grid=new C(e.grid.size,e.grid.cells),this.score=e.score,this.over=e.over,this.won=e.won,this.keepPlaying=e.keepPlaying):(this.grid=new C(this.size),this.score=0,this.over=!1,this.won=!1,this.keepPlaying=!1,this.addStartTiles()),this.actuate()},k.prototype.addStartTiles=function(){for(var e=0;e<this.startTiles;e++)this.addRandomTile()},k.prototype.addRandomTile=function(){if(this.grid.cellsAvailable()){var e=Math.random()<.9?2:4,t=new x(this.grid.randomAvailableCell(),e);this.grid.insertTile(t)}},k.prototype.actuate=function(){this.storageManager.getBestScore()<this.score&&this.storageManager.setBestScore(this.score),this.over?this.storageManager.clearGameState():this.storageManager.setGameState(this.serialize()),this.actuator.actuate(this.grid,{score:this.score,over:this.over,won:this.won,bestScore:this.storageManager.getBestScore(),terminated:this.isGameTerminated()})},k.prototype.serialize=function(){return{grid:this.grid.serialize(),score:this.score,over:this.over,won:this.won,keepPlaying:this.keepPlaying}},k.prototype.prepareTiles=function(){this.grid.eachCell((function(e,t,i){i&&(i.mergedFrom=null,i.savePosition())}))},k.prototype.moveTile=function(e,t){this.grid.cells[e.x][e.y]=null,this.grid.cells[t.x][t.y]=e,e.updatePosition(t)},k.prototype.move=function(e){var t=this;if(!this.isGameTerminated()){var i,r,a=this.getVector(e),o=this.buildTraversals(a),s=!1;this.prepareTiles(),o.x.forEach((function(e){o.y.forEach((function(o){if(i={x:e,y:o},r=t.grid.cellContent(i),r){var n=t.findFarthestPosition(i,a),l=t.grid.cellContent(n.next);if(l&&l.value===r.value&&!l.mergedFrom){var c=new x(n.next,2*r.value);c.mergedFrom=[r,l],t.grid.insertTile(c),t.grid.removeTile(r),r.updatePosition(n.next),t.score+=c.value,2048===c.value&&(t.won=!0)}else t.moveTile(r,n.farthest);t.positionsEqual(i,r)||(s=!0)}}))})),s&&(this.addRandomTile(),this.movesAvailable()||(this.over=!0),this.actuate())}},k.prototype.getVector=function(e){var t={0:{x:0,y:-1},1:{x:1,y:0},2:{x:0,y:1},3:{x:-1,y:0}};return t[e]},k.prototype.buildTraversals=function(e){for(var t={x:[],y:[]},i=0;i<this.size;i++)t.x.push(i),t.y.push(i);return 1===e.x&&(t.x=t.x.reverse()),1===e.y&&(t.y=t.y.reverse()),t},k.prototype.findFarthestPosition=function(e,t){var i;do{i=e,e={x:i.x+t.x,y:i.y+t.y}}while(this.grid.withinBounds(e)&&this.grid.cellAvailable(e));return{farthest:i,next:e}},k.prototype.movesAvailable=function(){return this.grid.cellsAvailable()||this.tileMatchesAvailable()},k.prototype.tileMatchesAvailable=function(){for(var e,t=this,i=0;i<this.size;i++)for(var r=0;r<this.size;r++)if(e=this.grid.cellContent({x:i,y:r}),e)for(var a=0;a<4;a++){var o=t.getVector(a),s={x:i+o.x,y:r+o.y},n=t.grid.cellContent(s);if(n&&n.value===e.value)return!0}return!1},k.prototype.positionsEqual=function(e,t){return e.x===t.x&&e.y===t.y};var S={name:"GameOne",mounted(){window.requestAnimationFrame((function(){new k(4,m,b,w)}))}};const P=(0,d.Z)(S,[["render",y]]);var z=P,T={name:"App",components:{HelloWorld:v,GameOne:z}};const j=(0,d.Z)(T,[["render",o]]);var A=j;(0,r.ri)(A).mount("#app"),console.log("ceshi")}},t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,r,a,o){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],o=e[u][2];for(var n=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((function(e){return i.O[e](r[l])}))?r.splice(l--,1):(n=!1,o<s&&(s=o));if(n){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,s=r[0],n=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(l)var u=l(i)}for(t&&t(r);c<s.length;c++)o=s[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(u)},r=self["webpackChunkvue_2048_test"]=self["webpackChunkvue_2048_test"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=i.O(void 0,[998],(function(){return i(5269)}));r=i.O(r)})();
//# sourceMappingURL=app.1ab9c5d5.js.map